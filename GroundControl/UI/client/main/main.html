
<div class="card-group">
    <div class="card" style="width: 30rem;"> 
        <div class="form-row">
            <div class="form-group col-md-6">    
                <h2>Last Blimp Heartbeat:</h2>
                <h4>{{m.status.blimpLastHeartbeat}}</h4> 
                <button type="button" style="width: 200px;" class="btn btn-secondary" ng-click="m.triggerOpenMVcodeUpload()">Update Open MV Code</button>                                         
            </div>  
            <div class="form-group col-md-5">    
                <div class="form-row">
                    <h5>Update Status:  &ensp;</h5>
                    <label>{{m.updateOpenMvCodeStatus.updateStatus}}</label>
                </div>
                
                <div class="form-row">
                    <h5>Last Error: &ensp;</h5>
                    <label> {{m.updateOpenMvCodeStatus.lastRunTimeError}}</label>
                </div>
                
                <div class="form-row">
                    <h5>Last Update: &ensp;</h5>
                    <label> {{m.updateOpenMvCodeStatus.datetimeLastUpload}}</label>
                </div>                                
                
            </div>
        
        </div>

        <p></p>
    </div>
    <div class="card" style="width: 30rem;">      
        <h4 class="card-header" >Control:</h4>
        <form>            
            <div class="form-row">
                <div class="form-group col-md-2">    
                    <label>
                        <input type="radio" ng-model = "m.control" value="autonomous" ng-change="m.sendControlChange()"> Autonomous
                    </label>
                </div>  
                <div class="form-group col-md-2">    
                    <label>
                        <input type="radio" ng-model = "m.control" value="auto-assisted" ng-change="m.sendControlChange()"> Auto-Assisted
                    </label>
                </div>
                <div class="form-group col-md-2">                                    
                    <label>
                        <input type="radio" ng-model = "m.control" value="manualWeb" ng-change="m.sendControlChange()"> Manual web control
                    </label>
                </div>
                <div class="form-group col-md-2">                                    
                    <label>
                        <input type="radio" ng-model = "m.control" value="manual" ng-change="m.sendControlChange()"> Manual Remote
                    </label>
                </div>                
            </div>
        </form>
                
        
        <p></p>
    </div>
</div>

<div class="card-group">
    <div class="card" style="width: 30rem;"> 
        <h5 class="card-header" >System Information:</h5>
        <div class="card-body">  
            <h4>Control Authority: {{m.status.controlAuthority}}</h4>
            <h4>Mode: {{m.status.state_description}}</h4>
            <h4>Target: {{m.status.state_target}}</h4>
            <h4>Action: {{m.status.state_action}}</h4>
            <h4>Maneuever: {{m.status.currentManeuver}}</h4>
        </div>
    </div>   
    <div class="card" style="width: 30rem;"> 
        <h5 class="card-header">Sensor Information:</h5>

        <h4>Camera detection string: {{m.status.cameraDetectionStr}}</h4>    
        <h4>Ir Sensor Detection: {{m.status.isIrSensorDetection}}</h4>            
        <h4>Lidar Distance (cm): {{m.status.lidarDistance}}</h4>        
    
    </div>
    <div class="card text-white bg-success" style="width: 15rem;">      
        <h5 class="card-header">Active Values</h5>
        
        <h5>Up: {{m.status.upMotor}}</h5>
        <h5>Throttle: {{m.status.throttleMotor}}</h5>
        <h5>Yaw: {{m.status.yawMotor}}</h5>
        <h5>Servo Door: {{m.status.servoDoor}}</h5>
        
    </div>

    <div class="card" style="width: 18rem;">
        <h5 class="card-header">Auto-Assisted</h5>
        
        <div class="form-row">
            <div class="form-group col-md-3">    
                <label>
                    <input type="radio" ng-model = "m.mode" value="hover" ng-change="m.sendControlChange()"> Hover
                </label>
            </div>  
            <div class="form-group col-md-3">    
                <label>
                    <input type="radio" ng-model = "m.mode" value="yaw" ng-change="m.sendControlChange()"> Yaw
                </label>
            </div>                
            <div class="form-group col-md-4">    
                <label>
                    <input type="radio" ng-model = "m.mode" value="hoverYaw" ng-change="m.sendControlChange()"> Hover-Yaw
                </label>
            </div>                
        </div>
        <label>Yaw Rate</label><input type = "number" ng-model = "m.assistedParams.yawRate" style="width: 75px;" >  
        <label>Height Set Point</label><input type = "number" ng-model = "m.assistedParams.heightSetPoint" style="width: 75px;" >  
        
        <button type="button" style="width: 150px;" class="btn btn-primary" ng-click="m.sendAssistedParams()">Send</button>            
    </div>

    <div class="card border-primary text-primary" style="width: 30rem;" >      
        <h5 class="card-header">Manual Control Requests</h5>
        
        <label>Up</label><input type = "number" ng-model = "m.requests.up" style="width: 75px;" >  
    
        <label>Throttle</label>
        <input type = "number" ng-model = "m.requests.throttle" style="width: 75px;" >  
    
        <label>Yaw</label>
        <input type = "number" ng-model = "m.requests.yaw" style="width: 75px;" >  
    
        <label>Door open</label>
        <input type = "number" ng-model = "m.requests.doorOpen" style="width: 75px;" >  
        <button type="button" style="width: 150px;" class="btn btn-primary" ng-click="m.sendRequests()">Send</button>                                         
    </div>

</div>



<div class="card-group">

    <div class="card text-white bg-dark mb-3" style="width: 40rem;">     
        <h5 class="card-header">Log printouts {{m.logs.logTime}}</h5>
        <label>Num log loops to view: </label>    
        <input type = "number" ng-model = "m.numLogLoopsToView" style="width: 75px;" >  
    
        <p></p>
        <textarea class="text-white bg-dark mb-3" ng-model="m.logs.lines" rows="25"></textarea>
    </div>

    
    <div class="card">
        <h5 class="card-header">Plotting</h5>
        <div class="card-body">
            <nvd3 options="m.plotting.options" data="m.plotting.data" config="{refreshDataOnly: false,deepWatchData: true,
                deepWatchDataDepth: 0}"  >
            </nvd3> 
        </div>    
    </div>


    <div class="card border-primary text-secondary" style="width: 30rem;" >    

        <h5 class="card-header">Configuration Values</h5>
        <form>            
            <div class="form-row">
                <div class="form-group col-md-2">    
                    <h4>Up</h4>
                </div>
                <div class="form-group col-md-2">    
                    <label>P</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.up.p" >              
                </div>
                <div class="form-group col-md-2">    
                    <label>I</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.up.i" >  
                </div>
                <div class="form-group col-md-2">    
                    <label>D</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.up.d" >  
                </div>         
                <div class="form-group col-md-2">    
                    <label>Scalar</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.scalar.up" >  
                </div>                    
            </div>
        
            <div class="form-row">
                <div class="form-group col-md-2">    
                    <h4>Throttle</h4>
                </div>
                <div class="form-group col-md-2">    
                    <label>P</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.throttle.p" >              
                </div>
                <div class="form-group col-md-2">    
                    <label>I</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.throttle.i" >  
                </div>
                <div class="form-group col-md-2">    
                    <label>D</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.throttle.d" >  
                </div>       
                <div class="form-group col-md-2">    
                    <label>Scalar</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.scalar.throttle" >  
                </div>                      
            </div>


            <div class="form-row">
                <div class="form-group col-md-2">    
                    <h4>Yaw</h4>
                </div>
                <div class="form-group col-md-2">    
                    <label>P</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.yaw.p" >              
                </div>
                <div class="form-group col-md-2">    
                    <label>I</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.yaw.i" >  
                </div>
                <div class="form-group col-md-2">    
                    <label>D</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.yaw.d" >  
                </div>         
                <div class="form-group col-md-2">    
                    <label>Scalar</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.scalar.yaw" >  
                </div>             
            </div>   
            

            <div class="form-row">
                <div class="form-group col-md-2">    
                    <label>Rounding Up</label>
                    <input type = "number" class="form-control" ng-model = "m.config.pid.up.error_rounding_up" >  
                </div>
                <div class="form-group col-md-2">    
                    <label>Scaling Up</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.up.error_scaling_up" >              
                </div>
                <div class="form-group col-md-2">    
                    <label>Min Up</label>                
                    <input type = "number" class="form-control" ng-model = "m.config.pid.up.pid_min_up" >  
                </div>                          
            </div>   

        </form>
         
        <button type="button" style="width: 150px;" class="btn btn-secondary" ng-click="m.sendConfig()">Send</button>                                         
    </div>

</div>
